{% extends 'base.html.twig' %}

{% block title %}Demande de rendez-vous{% endblock %}
{% block stylesheets %}
            
    <link rel="stylesheet" href="{{asset('css/styles.css')}}">
    {#{{ encore_entry_link_tags('app') }}#}
           
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="icon" type="image/png" sizes="16x16" href="{{asset('./images/azerty.jpg')}}">
{% endblock %}
{% block body %}
{% include 'layout/navbar.html.twig' %}
    <div class="container">
        <h1>Demande d'intervention Ã  domicile</h1>
        <div class="row mt-5">
            <div class="col">
                {% for rdv in rdvs| sort((a, b) => b.date <=> a.date) %}
                    <div class="zoom ">
                        {% if  rdv.confirmer == 1 %}
                            <div class="card cardCall bg-green mb-3" >
                        {% elseif rdv.confirmer == 2 %}
                            <div class="card cardCall mb-3 bg-orange" >
                        {% else %}
                            <div class="card cardCall mb-3" >
                        {% endif %}
                            <div class="card-body">
                                <h5 class="card-title"> {{ rdv.confirmer }} {{ rdv.nom|upper }} {{ rdv.prenom }}</h5>
                                <p class="card-text"><a class="none" href="tel:~{{ rdv.tel }}">{{ rdv.tel }}</a></p>
                                <p class="card-text"><a class="none" href="mailto:~{{ rdv.mail }}">{{ rdv.mail }}</a></p>
                                <p class="card-text">{{ rdv.adresse|capitalize }}</p>
                                <p class="card-text">{{ rdv.message|capitalize }}</p>
                            </div>
                            <div class="card-footer text-muted">
                                {{ include('rdv/confirmation_form.html.twig') }}
                                <button type="button" class="btn btn-orange right white" data-bs-toggle="modal" data-bs-target="#staticBackdrop{{rdv.id}}">
                                    Sugestion
                                </button>
                            {#<a class="btn btn-secondary right" href="{{ path('app_rdv_edit_date', {'id': rdv.id}) }}"  >x</a>#}
                                {{  rdv.date|date('d-m-Y H:i:s ') }}
                                <div class="right"> {{ include('rdv/_delete_form.html.twig') }} </div>
                                <a class="btn btn-secondary right" href="{{ path('app_rdv_edit', {'id': rdv.id}) }}"  ><img class="edit" width='20px' src="{{asset('/images/icon-edit.png')}}"/></a>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->
                    {{ include('rdv/edit_date.html.twig') }}
                {% endfor %}
            </div>
            <div class="col">
                <p style="color:right"> En attente</p>
            </div>
        </div>

        <a href="{{ path('app_rdv_new') }}">Create new</a>
        
    </div>
    
    {% include 'layout/footer.html.twig' %}
    




{% endblock %}
